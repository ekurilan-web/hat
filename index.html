<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×’×œ×’×œ ×”×©××œ×•×ª - ××”×“×•×¨×” ××¢×•×“×›× ×ª</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&display=swap');

        body {
            font-family: 'Heebo', sans-serif;
            background-color: #121212;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            color: #00e5ff;
            text-shadow: 0 0 15px rgba(0, 229, 255, 0.6);
            margin-bottom: 5px;
            font-size: 2.5rem;
        }

        #status {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #ffd700;
            font-weight: bold;
        }

        /* ×§×•× ×˜×™×™× ×¨ ×”×’×œ×’×œ */
        .wheel-wrapper {
            position: relative;
            width: 400px;
            height: 400px;
            margin-bottom: 30px;
        }

        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #fff;
            box-shadow: 0 0 30px rgba(0, 229, 255, 0.3);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            position: relative;
            overflow: hidden;
        }

        /* ×”××—×˜ */
        #pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid #ff4081;
            z-index: 10;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.7));
        }

        .segment-number {
            position: absolute;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 4px black;
        }

        /* ×›×¤×ª×•×¨ ×¡×™×‘×•×‘ */
        button#spinBtn {
            padding: 15px 50px;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #00e5ff, #2979ff);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(41, 121, 255, 0.5);
            transition: transform 0.2s, filter 0.2s;
            outline: none;
        }

        button#spinBtn:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        button#spinBtn:disabled {
            background: #555;
            box-shadow: none;
            cursor: not-allowed;
            transform: none;
        }

        /* ××•×“×œ ×©××œ×•×ª */
        #question-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            width: 90%;
            max-width: 800px;
            text-align: center;
        }

        .cards-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .question-card {
            background: linear-gradient(180deg, #1f2a40, #121212);
            border: 2px solid #00e5ff;
            border-radius: 15px;
            padding: 30px;
            width: 40%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            min-height: 250px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .question-card:hover {
            background: #2a3b55;
            transform: translateY(-10px);
            box-shadow: 0 0 25px rgba(0, 229, 255, 0.6);
            border-color: #ff4081;
        }

        .modal-title {
            font-size: 2.2rem;
            color: #fff;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #aaa;
            font-size: 1.2rem;
        }

        #finish-screen {
            display: none;
            text-align: center;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

    </style>
</head>
<body>

    <h1>×’×œ×’×œ ×”×©××œ×•×ª</h1>
    <div id="status">×ª×•×¨ ×”×™×œ×“/×” ×”×¨××©×•×Ÿ (×¡×™×‘×•×‘ 1)</div>

    <div class="wheel-wrapper">
        <div id="pointer"></div>
        <div id="wheel"></div>
    </div>

    <button id="spinBtn" onclick="spinWheel()">×¡×•×‘×‘ ××ª ×”×’×œ×’×œ!</button>

    <div id="question-modal">
        <div class="modal-content">
            <div class="modal-title">×”×’×œ×’×œ ×¢×¦×¨ ×¢×œ ×–×•×’ ×©××œ×•×ª!</div>
            <div class="subtitle">×‘×—×¨×• ××ª ×”×©××œ×” ×©×ª×¨×¦×• ×œ×¢× ×•×ª ×¢×œ×™×”:</div>
            <div class="cards-container" id="cards-area">
                </div>
        </div>
    </div>

    <div id="finish-screen">
        <h1>×¡×™×™×× ×• ××ª ×›×œ ×”×©××œ×•×ª!</h1>
        <p style="font-size: 1.5rem;">×›×œ ×”×›×‘×•×“ ! ğŸ“</p>
    </div>

<script>
    // --- ×”×××’×¨ ×”××¢×•×“×›×Ÿ ×¢× ×”×©××œ×•×ª ×”×—×“×©×•×ª ---
    
    const allPairs = [
        // --- ××©×›×•×œ 1: ×× ×™ ×•×”××•×— ×©×œ×™ (×¡×™×‘×•×‘×™× 1-3) ---
        { id: 1, cluster: 1, q: ["×”×× ×™×© ××©×”×• ×§×˜×Ÿ ×©××ª×” ×™×•×“×¢ ×”×™×•× ×¢×œ ×¢×¦××š, ×©×œ× ×ª××™×“ ×©××ª ×œ×‘ ××œ×™×• ×§×•×“×?", "××™×š ××ª×” ××¨×’×™×© ×”×™×•× ×œ×’×‘×™ ×–×” ×©××ª×” ××•×˜×™×¡×˜?"] },
        { id: 2, cluster: 1, q: ["×”×× ×’×™×œ×™×ª ××©×”×• ×©×¢×•×–×¨ ×œ×š ×›×©×§×©×”?", "××” ×”×“×‘×¨ ×©×”×›×™ ×××œ× ×œ×š ×¡×•×œ×œ×” ×‘×–××Ÿ ×”××—×¨×•×Ÿ )?"] },
        { id: 3, cluster: 1, q: ["×”×× ×”×™×” ×¨×¢×™×•×Ÿ ××—×“ ×©×—×©×‘×ª ×¢×œ×™×• ×’× ××—×•×¥ ×œ×©×¢×•×ª ×”×§×‘×•×¦×”?", "×™×© ××©×”×• ×©×¢×“×™×™×Ÿ ××¡×§×¨×Ÿ ××•×ª×š ×œ×’×‘×™ ×¢×¦××š?"] },
        
        // --- ××©×›×•×œ 2: ×”×—×•×•×™×” ×‘×§×‘×•×¦×” (×¡×™×‘×•×‘×™× 4-6) ---
        { id: 4, cluster: 2, q: ["×”×× ×”×™×” ××¤×’×© ××• × ×•×©× ×©×™×•×ª×¨ ×¢× ×™×™×Ÿ ××•×ª×š?", "×”×× ×”×™×” ××©×”×• ×‘×§×‘×•×¦×” ×©×¤×—×•×ª ×”×ª××™× ×œ×š ××• ×©×”×™×” ××‘××¡?"] },
        { id: 5, cluster: 2, q: ["××™×–×” × ×•×©× ×”×›×™ × ×©××¨ ××™×ª×š ××”×§×‘×•×¦×”?", "×”×× ×”×¨×’×©×ª ×©×™×© ×›××Ÿ ×¢×•×“ ×™×œ×“×™× ×©×“×•××™× ×œ×š ×‘××™×–×©×”×• ×“×‘×¨?"] },
        // ×›××Ÿ ×”×•×¡×¤× ×• ××ª ×©××œ×ª ×”×¡×•×œ×œ×” ×”×§×‘×•×¦×ª×™×ª:
        { id: 6, cluster: 2, q: ["×”×× ××ª×” ××¨×’×™×© ×©×”××¤×’×©×™× ×‘×§×‘×•×¦×” ×¨×•×§× ×• ×œ×š ××ª ×”×¡×•×œ×œ×” ××• ××™×œ××• ××•×ª×”?", "×”×™×” ××©×”×• ×©×”×™×™×ª ××©× ×” ×‘×§×‘×•×¦×”?"] },

        // --- ××©×›×•×œ 3: ××‘×˜ ×”×—×•×¦×” ×•×œ×¢×ª×™×“ (×¡×™×‘×•×‘×™× 7-9) ---
        // ×›××Ÿ ×”×•×¡×¤× ×• ××ª ×©××œ×ª ×”×”×¡×‘×¨ ×¢×œ ××•×˜×™×–×:
        { id: 7, cluster: 3, q: ["×× ×”×™×™×ª ×¦×¨×™×š ×œ×”×¡×‘×™×¨ ×œ×§×‘×•×¦×” ××” ×–×” ××•×˜×™×–×, ××” ×”×™×™×ª ××•××¨?", "×™×© ××©×”×• ×©×œ× ×“×™×‘×¨× ×• ×¢×œ×™×• ×•×”×™×™×ª ×¨×•×¦×” ×©×›×Ÿ?"] },
        { id: 8, cluster: 3, q: ["×”×× ×”×™×™×ª ×××œ×™×¥ ×œ×—×‘×¨ ×œ×‘×•× ×œ×§×‘×•×¦×” ×›×–××ª? ×œ××” / ×œ××” ×œ×?", "×× ×”×™×™×ª×” ×§×‘×•×¦×” × ×•×¡×¤×ª â€“ ×¢×œ ××” ×”×™×™×ª ×¨×•×¦×” ×©×”×™× ×ª×”×™×”?"] },
        // ×›××Ÿ ×”×•×¡×¤× ×• ××ª ×©××œ×ª ×”'×œ×”×™×•×ª ×¢×¦××™':
        { id: 9, cluster: 3, q: ["×”×× ××ª×” ××¨×’×™×© ×©×‘×¢×§×‘×•×ª ×”×§×‘×•×¦×” ××ª×” ×™×›×•×œ ×œ×ª×ª ×œ×¢×¦××š ×œ×”×™×•×ª '×™×•×ª×¨ ××ª×”' ×’× ×‘××§×•××•×ª ××—×¨×™×?", "×× ×—×‘×¨ ××•×˜×™×¡×˜ ×”×™×” ×©×•××œ ××•×ª×š ××” ×¢×•×©×™× ×‘×§×‘×•×¦×” ×”×–××ª â€“ ××” ×”×™×™×ª ××¡×¤×¨ ×œ×•?"] }
    ];

    let activeSegments = [...allPairs];
    let currentRound = 1;
    let currentRotation = 0;

    const wheel = document.getElementById('wheel');
    const statusDiv = document.getElementById('status');
    const modal = document.getElementById('question-modal');
    const cardsArea = document.getElementById('cards-area');
    const spinBtn = document.getElementById('spinBtn');
    const finishScreen = document.getElementById('finish-screen');

    drawWheel();

    function drawWheel() {
        wheel.innerHTML = ''; 
        const count = activeSegments.length;
        if(count === 0) return;

        const segmentAngle = 360 / count;
        const colors = ['#ff4081', '#7c4dff', '#00e5ff', '#00e676', '#ffea00', '#ff9100'];

        let gradientStr = 'conic-gradient(';
        for (let i = 0; i < count; i++) {
            gradientStr += `${colors[i % colors.length]} ${i * segmentAngle}deg ${(i + 1) * segmentAngle}deg, `;
            
            const segDiv = document.createElement('div');
            segDiv.style.position = 'absolute';
            segDiv.style.width = '100%';
            segDiv.style.height = '100%';
            const midAngle = (i * segmentAngle) + (segmentAngle / 2);
            segDiv.style.transform = `rotate(${midAngle}deg)`;
            segDiv.style.display = 'flex';
            segDiv.style.justifyContent = 'center';
            segDiv.style.paddingTop = '20px'; 
            
            const content = document.createElement('span');
            content.innerText = "â“"; 
            content.style.fontSize = count > 6 ? '1.5rem' : '2.5rem';
            
            segDiv.appendChild(content);
            wheel.appendChild(segDiv);
        }
        
        gradientStr = gradientStr.slice(0, -2) + ')';
        wheel.style.background = gradientStr;
    }

    function spinWheel() {
        if (activeSegments.length === 0) return;
        spinBtn.disabled = true;

        let targetCluster = 1;
        if (currentRound >= 4 && currentRound <= 6) targetCluster = 2;
        if (currentRound >= 7) targetCluster = 3;

        const validCandidates = activeSegments.filter(seg => seg.cluster === targetCluster);
        const pool = validCandidates.length > 0 ? validCandidates : activeSegments;
        const winningSegmentObj = pool[Math.floor(Math.random() * pool.length)];
        const visualIndex = activeSegments.indexOf(winningSegmentObj);

        const count = activeSegments.length;
        const segmentAngle = 360 / count;
        const targetMidAngle = (visualIndex * segmentAngle) + (segmentAngle / 2);
        
        const extraSpins = 360 * 5; 
        const stopAngle = 360 - targetMidAngle; 
        currentRotation = Math.ceil(currentRotation / 360) * 360 + extraSpins + stopAngle;

        wheel.style.transform = `rotate(${currentRotation}deg)`;

        setTimeout(() => {
            showModal(winningSegmentObj);
        }, 4000);
    }

    function showModal(segmentObj) {
        modal.style.display = 'flex';
        cardsArea.innerHTML = '';

        segmentObj.q.forEach(questionText => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.innerText = questionText;
            card.onclick = () => {
                closeTurn(segmentObj);
            };
            cardsArea.appendChild(card);
        });
    }

    function closeTurn(segmentObjToRemove) {
        modal.style.display = 'none';
        activeSegments = activeSegments.filter(item => item.id !== segmentObjToRemove.id);
        currentRound++;
        updateStatusText();

        if (activeSegments.length > 0) {
            drawWheel();
        } else {
            wheel.style.display = 'none';
            document.querySelector('.wheel-wrapper').style.display = 'none';
            spinBtn.style.display = 'none';
            statusDiv.style.display = 'none';
            finishScreen.style.display = 'block';
            createConfetti();
        }
        spinBtn.disabled = false;
    }

    function updateStatusText() {
        if (currentRound <= 9) {
            const childNum = ((currentRound - 1) % 3) + 1;
            statusDiv.innerText = `×ª×•×¨ ×”×™×œ×“/×” ××¡×¤×¨ ${childNum} (×©××œ×” ${currentRound} ××ª×•×š 9)`;
        }
    }
    
    function createConfetti() {
        for(let i=0; i<50; i++) {
            const conf = document.createElement('div');
            conf.className = 'confetti';
            conf.style.left = Math.random() * 100 + 'vw';
            conf.style.backgroundColor = `hsl(${Math.random()*360}, 100%, 50%)`;
            conf.style.animationDuration = Math.random() * 3 + 2 + 's';
            document.body.appendChild(conf);
        }
    }

</script>
</body>
</html>
